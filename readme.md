# Предсказание риска сердечного приступа
## Описание проекта
Этот проект представляет собой FastAPI-приложение, которое принимает CSV-файл с признаками пациентов, выполняет предобработку, генерацию признаков и прогноз вероятности сердечного приступа с помощью обученной модели (CatBoostClassifier) и возвращает готовый CSV-файл с результатами (id, prediction).

## Основные возможности

- Полностью автоматическая обработка данных (удаление лишних признаков, создание новых фич, нормализация);

- Фиксированный порог классификации 0.25 — соответствует оптимальному значению из экспериментов;

- Поддержка REST API (FastAPI) — легко интегрируется в любой backend;

- Автоматическая генерация файла predictions_<timestamp>.csv с результатами;

- Предсказания по загруженному CSV-файлу без ручных настроек.

## Структура проекта
```
heart/
│
├── artifacts/
│  └── best_pipeline.pkl            # Обученная модель
├── heart_main.ipynb                # Исследования и обучение модели 
├── main.py                         # FastAPI-приложение
├── heart_test.csv                  # Пример тестовой выборки
├── requirements.txt                # Зависимости проекта
└── README.md                       # README (текущий файл)
```

## Инструкцию по использованию

1. Клонируйте репозиторий:
```bash
git clone https://github.com/<ваше-юзернейм>/heart-risk-api.git
cd heart-risk-api
```
2. Создайте виртуальное окружение и установите зависимости:
```bash
python -m venv .venv
# Windows
.venv\Scripts\activate
# macOS / Linux
source .venv/bin/activate
pip install -r requirements.txt
```

3. Запускаете сервер
``` bash
uvicorn app:app --reload
```
4. Добавляете файл
 ```bash
   curl -X POST "http://127.0.0.1:8000/predict" -H "Content-Type: application/json" -d "{""test_csv_path"":""data.csv""}"
```
5. Файл будет сохранен в папке atrifacts/ с уникальным именем

Также можно сделать это вручную
1. Повторяем шаги 1-3 из прошлой инструкции
2. Заходите по ссылке http://127.0.0.1:8000/docs
3. Раскрываете /predict
4. Нажимаете Try it out
5. Меняете "string" на путь к своему файлу. Пример
```bash
{
  "test_csv_path": "test.csv"
}
```
5. Нажимаете Execute
6. Пролистываете ниже
7. Нажимаете Download File
8. Выбираете место скачивания

  
